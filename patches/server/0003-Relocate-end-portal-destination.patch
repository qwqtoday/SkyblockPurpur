From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: qwqtoday <lukas.leung@hotmail.com>
Date: Wed, 14 Aug 2024 12:32:28 +0800
Subject: [PATCH] Relocate end portal destination


diff --git a/src/main/java/net/minecraft/world/level/block/EndPortalBlock.java b/src/main/java/net/minecraft/world/level/block/EndPortalBlock.java
index 9c11a615fbfd4fcaff5df2a15d1b8578897ab2b4..a87b985385c9fb5644bbabb8394f51560249ccbf 100644
--- a/src/main/java/net/minecraft/world/level/block/EndPortalBlock.java
+++ b/src/main/java/net/minecraft/world/level/block/EndPortalBlock.java
@@ -100,7 +100,7 @@ public class EndPortalBlock extends BaseEntityBlock implements Portal {
             return new DimensionTransition(PlayerTeleportEvent.TeleportCause.END_PORTAL); // CraftBukkit- always fire event in case plugins wish to change it
         } else {
             boolean flag = resourcekey == Level.END;
-            BlockPos blockposition1 = flag ? ServerLevel.END_SPAWN_POINT : worldserver1.getSharedSpawnPos();
+            BlockPos blockposition1 = new BlockPos(((pos.getX() << 9) >> 9) + 256, pos.getY(), ((pos.getZ() << 9) >> 9) + 256);
             Vec3 vec3d = blockposition1.getBottomCenter();
             float f = entity.getYRot();
 
